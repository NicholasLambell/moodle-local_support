{"version":3,"file":"support_form.min.js","sources":["../src/support_form.js"],"sourcesContent":["import * as Str from 'core/str';\n\nconst SELECTORS = {\n    TIME_ELEMENT: 'input[data-time-element]',\n    TIME_TOTAL: 'span[data-time-total]',\n};\n\n/**\n * Called by Moodle on module load.\n */\nexport const init = () => {\n    document.querySelectorAll(SELECTORS.TIME_ELEMENT)\n        .forEach(element => element.addEventListener('input', handleTimeElementInput));\n\n    updateTotalTime();\n};\n\n/**\n * Handles the input event for time elements.\n */\nconst handleTimeElementInput = () => {\n    updateTotalTime();\n};\n\n/**\n * Updates the total time content based on the time elements.\n */\nconst updateTotalTime = () => {\n    const timeElements = document.querySelectorAll(SELECTORS.TIME_ELEMENT);\n    const totalTimeElement = document.querySelector(SELECTORS.TIME_TOTAL);\n\n    const totalTime = calculateTotalTime(timeElements);\n\n    Str.get_string('supportform:totaltimevalue', 'local_support', totalTime.toString())\n        .then(string => (totalTimeElement.textContent = string));\n};\n\n/**\n * Calculates the total time based on the time elements.\n *\n * @param {NodeListOf<Element>} timeElements Time elements.\n * @returns {number} Total time in minutes.\n */\nconst calculateTotalTime = (timeElements) => {\n    let totalTime = 0;\n    timeElements.forEach(element => {\n        const value = parseInt(element.value);\n        if (isNaN(value)) {\n            return;\n        }\n\n        const minutes = parseInt(element.dataset.minutes);\n        const time = minutes * value;\n\n        totalTime += isNaN(time) ? 0 : time;\n    });\n\n    return totalTime;\n};"],"names":["SELECTORS","document","querySelectorAll","forEach","element","addEventListener","handleTimeElementInput","updateTotalTime","timeElements","totalTimeElement","querySelector","totalTime","calculateTotalTime","Str","get_string","toString","then","string","textContent","value","parseInt","isNaN","time","dataset","minutes"],"mappings":"+kCAEMA,uBACY,2BADZA,qBAEU,sCAMI,KAChBC,SAASC,iBAAiBF,wBACrBG,SAAQC,SAAWA,QAAQC,iBAAiB,QAASC,0BAE1DC,yBAMED,uBAAyB,KAC3BC,mBAMEA,gBAAkB,WACdC,aAAeP,SAASC,iBAAiBF,wBACzCS,iBAAmBR,SAASS,cAAcV,sBAE1CW,UAAYC,mBAAmBJ,cAErCK,IAAIC,WAAW,6BAA8B,gBAAiBH,UAAUI,YACnEC,MAAKC,QAAWR,iBAAiBS,YAAcD,UASlDL,mBAAsBJ,mBACpBG,UAAY,SAChBH,aAAaL,SAAQC,gBACXe,MAAQC,SAAShB,QAAQe,UAC3BE,MAAMF,oBAKJG,KADUF,SAAShB,QAAQmB,QAAQC,SAClBL,MAEvBR,WAAaU,MAAMC,MAAQ,EAAIA,QAG5BX"}